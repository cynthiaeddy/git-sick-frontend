{"version":3,"file":"static/webpack/static/development/pages/sell.js.94a7f7e7a32d37236f6d.hot-update.js","sources":["webpack:///./components/CreateItem.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport Router from 'next/router';\nimport Form from './styles/Form';\nimport formatMoney from '../lib/formatMoney';\nimport Error from './ErrorMessage';\n\nconst UPDATE_ITEM_MUTATION = gql`\n\tmutation UPDATE_ITEM_MUTATION(\n\t\t$title: String!\n\t\t$description: String!\n\t\t$price: Int!\n\t\t$image: String\n\t\t$largeImage: String\n\t) {\n\t\tcreateItem(title: $title, description: $description, price: $price, image: $image, largeImage: $largeImage) {\n\t\t\tid\n\t\t}\n\t}\n`;\n\nclass UpdateItem extends Component {\n\tstate = {\n\t\ttitle: 'Cool Shoes',\n\t\tdescription: 'I love those shoes',\n\t\timage: 'dog.jpg',\n\t\tlargeImage: 'large-dog.jpg',\n\t\tprice: 1000\n\t};\n\thandleChange = (e) => {\n\t\tconst { name, type, value } = e.target;\n\t\tconst val = type === 'number' ? parseFloat(value) : value;\n\t\tthis.setState({ [name]: val });\n\t};\n\n\tuploadFile = async (e) => {\n\t\tconsole.log('uploading file...');\n\t\tconst files = e.target.files;\n\t\tconst data = new FormData();\n\t\tdata.append('file', files[0]);\n\t\tdata.append('upload_preset', 'sickfits');\n\n\t\tconst res = await fetch('https://api.cloudinary.com/v1_1/cynthiaeddy/image/upload', {\n\t\t\tmethod: 'POST',\n\t\t\tbody: data\n\t\t});\n\t\tconst file = await res.json();\n\t\tconsole.log(file);\n\t\tthis.setState({\n\t\t\timage: file.secure_url,\n\t\t\tlargeImage: file.eager[0].secure_url\n\t\t});\n\t};\n\trender() {\n\t\treturn (\n\t\t\t<Mutation mutation={UPDATE_ITEM_MUTATION} variables={this.state}>\n\t\t\t\t{(createItem, { loading, error }) => (\n\t\t\t\t\t<Form\n\t\t\t\t\t\tonSubmit={async (e) => {\n\t\t\t\t\t\t\t// Stop the form from submitting\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t// call the mutation\n\t\t\t\t\t\t\tconst res = await createItem();\n\t\t\t\t\t\t\t// change them to the single item page\n\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\tRouter.push({\n\t\t\t\t\t\t\t\tpathname: '/item',\n\t\t\t\t\t\t\t\tquery: { id: res.data.createItem.id }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Error error={error} />\n\t\t\t\t\t\t<fieldset disabled={loading} aria-busy={loading}>\n\t\t\t\t\t\t\t<label htmlFor=\"file\">\n\t\t\t\t\t\t\t\tImage\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\t\tid=\"file\"\n\t\t\t\t\t\t\t\t\tname=\"file\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Upload an image\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tonChange={this.uploadFile}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{this.state.image && <img width=\"200\" src={this.state.image} alt=\"Upload Preview\" />}\n\t\t\t\t\t\t\t\t{/* {this.state.image && <img width=\"200\" src={this.state.image} alt=\"Upload Preview\" />} */}\n\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t<label htmlFor=\"title\">\n\t\t\t\t\t\t\t\tTitle\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tid=\"title\"\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Title\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tvalue={this.state.title}\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t<label htmlFor=\"price\">\n\t\t\t\t\t\t\t\tPrice\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tid=\"price\"\n\t\t\t\t\t\t\t\t\tname=\"price\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Price\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tvalue={this.state.price}\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t<label htmlFor=\"description\">\n\t\t\t\t\t\t\t\tDescription\n\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\tid=\"description\"\n\t\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Enter A Description\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tvalue={this.state.description}\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t</Form>\n\t\t\t\t)}\n\t\t\t</Mutation>\n\t\t);\n\t}\n}\n\nexport default UpdateItem;\nexport { UPDATE_ITEM_MUTATION };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAaA;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAMA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AAAA;AAQA;AACA;AAFA;AACA;AARA;AAOA;AAPA;AAAA;AACA;AADA;AAWA;AACA;AACA;AAAA;AACA;AACA;AAFA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;AAiBA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AApEA;AA0EA;;;;AA7GA;AACA;AA+GA;;;;;A","sourceRoot":""}